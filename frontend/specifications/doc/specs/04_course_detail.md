# 課程詳情 頁面規格書

## 頁面資訊

| 項目     | 說明                                     |
| -------- | ---------------------------------------- |
| 路徑     | `/courses/:id`                           |
| 角色權限 | 公開頁面；已購買者顯示不同 UI 狀態       |
| 核心目的 | 展示課程完整資訊，驅動購買或開始學習     |

---

## 頁面結構

| 區塊                   | 說明                                           |
| ---------------------- | ---------------------------------------------- |
| Hero Section           | 課程基本資訊 + 媒體預覽窗                       |
| 側邊購買懸浮欄         | Sticky 購買卡片（Desktop 右側 / Mobile 底部）  |
| 核心內容分頁           | 課程簡介、課程大綱、講師簡介、學員評價         |

---

## 元件規格

### Hero Section

| 元素         | 規格                                               |
| ------------ | -------------------------------------------------- |
| 麵包屑導航   | 分類 > 子分類 > 課程名稱                           |
| 課程標題     | `<h1>` 層級                                        |
| 課程副標題   | 簡短課程大綱或亮點                                 |
| 講師資訊     | 頭像、姓名、連結                                   |
| 評分統計     | 平均星等、評價人數、已報名人數                     |
| 媒體預覽窗   | 預覽影片播放器或課程主圖                           |

### 側邊購買懸浮欄（Sticky Purchase Card）

| 狀態               | CTA 按鈕                |
| ------------------ | ----------------------- |
| 未購買             | 「立即購買」+「加入購物車」|
| 已購買             | 「開始學習」            |
| 講師身分（作者）   | 「編輯課程」            |

**課程特點清單：** 影片總時數、練習檔案、永久觀看權限、行動裝置支援

### 課程簡介（About This Course）

- 詳細描述、學習目標、適用對象、軟硬體需求

### 課程大綱（Curriculum Accordion）

- 展開/收合式手風琴元件
- 每節顯示：標題、單元數量
- 每單元顯示：圖標（影片/文件/測驗）、標題、時數、鎖頭圖標（未購買時）
- 標註「預覽」按鈕（開放免費試看單元）

### 講師簡介（Instructor Bio）

- 詳細經歷、開課清單、總學員數

### 學員評價（Reviews）

- 總體評分分佈圖
- 留言列表：學員姓名、評分星等、評價日期、評價內容

---

## API 整合

### 頁面初始化

```
GET /api/v1/courses/{id}
```

- 根據回傳資料或透過 `GET /api/v1/orders` 檢查使用者是否已擁有課程
- 根據結果切換「立即購買」或「開始學習」按鈕

### 購買流程

1. **立即購買：** `POST /api/v1/orders` → 建立訂單 → `POST /api/v1/orders/{id}/pay` → 導向付款
2. **加入購物車：** 課程 ID 存入 LocalStorage 或後端購物車緩存

### 影片預覽

```
GET /api/v1/videos/{id}/stream
```

- 預覽單元點擊時獲取 HLS 串流連結

---

## 狀態與錯誤處理

| 狀態               | 處理方式                                             |
| ------------------ | ---------------------------------------------------- |
| Loading            | Hero 區塊與大綱區塊使用 Skeleton Screen              |
| 課程下架（404）    | 顯示「此課程目前已關閉，請查看其他相關課程」         |
| 已購買狀態         | 隱藏價格資訊，大綱鎖頭圖標全部變為播放圖標           |

---

## 交互行為

| 行為           | 說明                                                       |
| -------------- | ---------------------------------------------------------- |
| 捲動監聽       | 向下捲動超過 Hero 時，購買欄產生陰影並固定，CTA 始終可見  |
| 大綱展開控制   | 預設展開第一章節，其餘收合                                 |
| 響應式         | Desktop 側邊欄 Sticky；Mobile 底部固定購買欄               |
